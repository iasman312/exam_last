{% extends 'base.html' %}

{% block title %}Профиль пользователя {{ user_obj.get_full_name|default:user_obj.username }}{% endblock %}
{% block page_header %}Личная страница пользователя {{ user_obj.get_full_name|default:user_obj.username }}{% endblock %}


{% block menu %}
    {% if user == user_obj %}
        <li class="menu_right"><a href="{% url 'accounts:user-change-password' %}">Сменить пароль</a></li>
        <li class="menu_right"><a href="{% url 'accounts:user-update-profile' %}">Редактировать профиль</a></li>
    {% endif %}
{% endblock %}


{% block content %}
    {% if user_obj.profile.avatar %}
        <img class="avatar" src="{{ user_obj.profile.avatar.url }}" width="250" height="250" alt="user picture">
    {% endif %}

    <p>Имя пользователя: {{ user_obj.username }}</p>
    <p>Имя: {{ user_obj.first_name }}</p>
    <p>Фамилия: {{ user_obj.last_name }}</p>
    <p>Дата рождения: {{ user_obj.profile.birth_date|date:'d.m.Y' }}</p>

    <p>Почта: {{ user_obj.email }}</p>

    <h3 class="text-center clear">Фотографии автора:</h3>
    {% for photo in photos %}
        <div class="card-columns">
          <div class="card">
            <img class="card-img-top" src="{{ photo.photo.url }}"alt="product picture">
            <div class="card-body">
              <h5 class="card-title">Подпись: {{ photo.signature }}</h5>
              <p class="card-text">Автор: {{ photo.author.username }}</p>
            </div>
            <div class="card-footer">
              <small class="text-muted">Дата: {{ photo.created_at }}</small>
              <p class="card-text">Альбом: {{ photo.album.name }}</p>
              <a class="btn btn-primary" href="{% url "gallery:photo-view" photo.pk %}" role="button">Подробнее...</a>
            </div>
          </div>
        </div>
    {% endfor %}
    <h3 class="text-center clear">Альбомы автора:</h3>
    {% for album in albums %}
        <p><a href="{% url "gallery:album-view" album.pk %}">{{ album.name }}</a></p>
    {% endfor %}
    <h3 class="text-center clear">Издранные фото автора:</h3>
    {% for photo in user_obj.fav_photos.all %}
        <div class="card-columns">
          <div class="card">
            <img class="card-img-top" src="{{ photo.photo.url }}"alt="product picture">
            <div class="card-body">
              <h5 class="card-title">Подпись: {{ photo.signature }}</h5>
              <p class="card-text">Автор: {{ photo.author.username }}</p>
            </div>
            <div class="card-footer">
              <small class="text-muted">Дата: {{ photo.created_at }}</small>
              <p class="card-text">Альбом: {{ photo.album.name }}</p>
              <a class="btn btn-primary" href="{% url "gallery:photo-view" photo.pk %}" role="button">Подробнее...</a>
            </div>
          </div>
        </div>
    {% endfor %}
    <h3 class="text-center clear">Избранные альбомы автора: </h3>
    {% for album in user_obj.fav_albums.all %}
        <p><a href="{% url "gallery:album-view" album.pk %}">{{ album.name }}</a></p>
    {% endfor %}
{% endblock %}
